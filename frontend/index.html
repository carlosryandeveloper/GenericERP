<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GenericERP - Front (v0.1)</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">GE</div>
      <div>
        <h1>GenericERP</h1>
        <p class="subtitle">Front v0.1 • Produtos • Movimentações • Saldo • Extrato</p>
      </div>
    </div>

    <div class="status">
      <span class="dot" id="apiDot" title="Status da API"></span>
      <span id="apiLabel">API: não testada</span>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div class="card-head">
        <h2>Configuração</h2>
        <p class="muted">Em Codespaces, o front tenta detectar automaticamente o host do backend.</p>
      </div>

      <div class="grid-2">
        <label class="field">
          <span>API Base</span>
          <input id="apiBase" placeholder="Ex: https://seu-codespace-8000.app.github.dev" />
        </label>

        <div class="actions">
          <button class="btn primary" id="btnHealth">Testar /health</button>
          <button class="btn" id="btnRoutes">Ver rotas</button>
        </div>
      </div>

      <pre id="healthResult" class="output"></pre>
    </section>

    <div class="split">
      <section class="card">
        <div class="card-head">
          <h2>Criar Produto</h2>
          <p class="muted">SKU é único. Repetiu? Backend responde 409.</p>
        </div>

        <div class="grid-3">
          <label class="field">
            <span>SKU</span>
            <input id="sku" placeholder="Ex: P-001" />
          </label>

          <label class="field grow">
            <span>Nome</span>
            <input id="name" placeholder="Ex: Caneta Azul" />
          </label>

          <label class="field">
            <span>Unidade</span>
            <input id="unit" placeholder="Ex: UN" />
          </label>
        </div>

        <div class="actions">
          <button class="btn primary" id="btnCreateProduct">Criar produto</button>
        </div>

        <pre id="productResult" class="output"></pre>
      </section>

      <section class="card">
        <div class="card-head">
          <h2>Criar Movimentação</h2>
          <p class="muted">Entrada (IN), Saída (OUT) e Ajuste (ADJUST).</p>
        </div>

        <div class="grid-4">
          <label class="field">
            <span>ID do produto</span>
            <input id="productId" type="number" placeholder="Ex: 1" />
          </label>

          <label class="field">
            <span>Tipo</span>
            <select id="type">
              <option value="IN">IN (Entrada)</option>
              <option value="OUT">OUT (Saída)</option>
              <option value="ADJUST">ADJUST (Ajuste)</option>
            </select>
          </label>

          <label class="field">
            <span>Quantidade</span>
            <input id="qty" type="number" step="0.01" placeholder="Ex: 10" />
          </label>

          <label class="field grow">
            <span>Observação</span>
            <input id="note" placeholder="Opcional" />
          </label>
        </div>

        <div class="actions">
          <button class="btn primary" id="btnCreateMove">Lançar</button>
        </div>

        <pre id="moveResult" class="output"></pre>
      </section>
    </div>

    <div class="split">
      <section class="card">
        <div class="card-head">
          <h2>Saldo</h2>
          <p class="muted">Somatório por produto com sinal (IN/ADJUST +, OUT -).</p>
        </div>

        <div class="actions">
          <button class="btn" id="btnBalance">Carregar saldo</button>
        </div>

        <pre id="balanceResult" class="output"></pre>
      </section>

      <section class="card">
        <div class="card-head">
          <h2>Extrato</h2>
          <p class="muted">Histórico auditável com saldo acumulado por linha.</p>
        </div>

        <div class="grid-3">
          <label class="field">
            <span>ID do produto</span>
            <input id="statementProductId" type="number" placeholder="Ex: 1" />
          </label>

          <label class="field">
            <span>De</span>
            <input id="fromDate" placeholder="YYYY-MM-DD" />
          </label>

          <label class="field">
            <span>Até</span>
            <input id="toDate" placeholder="YYYY-MM-DD" />
          </label>
        </div>

        <div class="actions">
          <button class="btn" id="btnStatement">Carregar extrato</button>
        </div>

        <pre id="statementResult" class="output"></pre>
      </section>
    </div>
  </main>

  <footer class="footer">
    <span>GenericERP • v0.1 • UI mínima para testes</span>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
